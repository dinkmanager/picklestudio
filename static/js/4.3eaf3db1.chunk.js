"use strict";(self.webpackChunkpickleball_courts=self.webpackChunkpickleball_courts||[]).push([[4],{2004:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var r=n(9950);var o=n(4414);function i(e){let{courts:t=[{id:1,name:"Court 1"},{id:2,name:"Court 2"},{id:3,name:"Court 3"},{id:4,name:"Court 4"}],openHour:n=7,closeHour:i=21,bookings:s=[],currentDate:a=new Date,onTimeSelect:l,onBookingClick:d}=e;const u=a.toLocaleDateString("en-CA"),c=(0,r.useMemo)(()=>s.filter(e=>e.date===u),[s,u]),m=(0,r.useMemo)(()=>{const e=[];for(let t=n;t<i;t++)e.push({hour:t,minute:0,label:"".concat(t,":00")}),e.push({hour:t,minute:30,label:null});return e},[n,i]),{isDragging:b,handleMouseDown:x,handleMouseEnter:h,handleMouseUp:p,selectionBox:M}=function(e){let{courts:t=[],openingHour:n=7,closingHour:o=21,onSelectionComplete:i}=e;const[s,a]=(0,r.useState)(!1),[l,d]=(0,r.useState)(null),[u,c]=(0,r.useState)(null);return(0,r.useRef)(null),{isDragging:s,handleMouseDown:(e,t)=>{a(!0),d({courtId:e,timeInMinutes:t}),c({courtId:e,timeInMinutes:t})},handleMouseEnter:(e,t)=>{s&&c({courtId:e,timeInMinutes:t})},handleMouseUp:()=>{if(s&&(a(!1),l&&u)){const e=Math.min(l.timeInMinutes,u.timeInMinutes),n=Math.max(l.timeInMinutes,u.timeInMinutes)+30,r=t.findIndex(e=>e.id===l.courtId),o=t.findIndex(e=>e.id===u.courtId),s=Math.min(r,o),a=Math.max(r,o),d=t.slice(s,a+1).map(e=>e.id);i&&i({startMinutes:e,endMinutes:n,courtIds:d})}},cancelSelection:()=>{a(!1),d(null),c(null)},selectionBox:l&&u?{start:{courtId:l.courtId,time:Math.min(l.timeInMinutes,u.timeInMinutes)},end:{courtId:u.courtId,time:Math.max(l.timeInMinutes,u.timeInMinutes)}}:null}}({courts:t,onSelectionComplete:l});return(0,o.jsx)("div",{className:"select-none overflow-auto pb-20 relative bg-white",onMouseUp:p,onMouseLeave:p,children:(0,o.jsxs)("div",{className:"min-w-[1000px]",children:[(0,o.jsx)("div",{className:"flex border-b border-slate-100 sticky top-0 bg-white z-10 shadow-sm ml-24",children:m.map((e,t)=>(0,o.jsx)("div",{className:"flex-1 min-w-[60px] h-10 border-r border-slate-50 relative flex items-end pb-1 justify-center",children:e.label&&(0,o.jsx)("span",{className:"text-xs font-medium text-slate-400 font-mono transform -translate-x-1/2 absolute left-0 bottom-1 bg-white px-1",children:e.label})},t))}),(0,o.jsx)("div",{className:"relative",children:t.map(e=>(0,o.jsxs)("div",{className:"flex h-24 border-b border-slate-100 group",children:[(0,o.jsx)("div",{className:"w-24 flex-shrink-0 sticky left-0 bg-white z-10 border-r border-slate-100 flex items-center justify-center font-bold text-slate-700 shadow-[4px_0_24px_-12px_rgba(0,0,0,0.1)]",children:e.name}),m.map((n,r)=>{const i=60*n.hour+n.minute,s=((e,n)=>{if(!M)return!1;const r=M.start.courtId,o=M.end.courtId,i=t.findIndex(t=>t.id===e),s=t.findIndex(e=>e.id===r),a=t.findIndex(e=>e.id===o),l=Math.min(s,a),d=Math.max(s,a),u=M.start.time,c=M.end.time;return i>=l&&i<=d&&n>=u&&n<=c})(e.id,i),a=c.find(t=>String(t.courtId)===String(e.id)&&i>=t.startMinutes&&i<t.endMinutes),l=a&&a.startMinutes===i,u=!!a;return(0,o.jsx)("div",{className:"flex-1 min-w-[60px] border-r border-slate-50 relative transition-colors duration-75\n                              ".concat(!u&&s?"bg-emerald-500/20":"","\n                              ").concat(u||s?"":"hover:bg-slate-50","\n                              ").concat(0===n.minute?"border-r-slate-100":""," \n                           "),onMouseDown:()=>!u&&x(e.id,i),onMouseEnter:()=>!u&&h(e.id,i),children:u&&(0,o.jsx)("div",{onClick:e=>{e.stopPropagation(),d&&d(a)},className:"absolute inset-0 m-0.5 rounded flex items-center justify-center text-[10px] font-bold truncate px-1 shadow-sm cursor-pointer hover:brightness-95 transition-all\n                                    ".concat("paid"===a.paymentStatus?"bg-emerald-100 text-emerald-800 border border-emerald-200":"bg-amber-50 text-amber-800 border border-amber-200 striped-bg","\n                                    ").concat(l?"":"border-l-0 rounded-l-none opacity-80"," \n                                "),style:{zIndex:1},children:l&&a.renterName})},r)})]},e.id))})]})})}}}]);